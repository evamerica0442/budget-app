<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Budget App - AWS Architecture</title>
<style>
    body {
        margin: 0;
        padding: 20px;
        background: #232f3e;
        font-family: 'Amazon Ember', 'Helvetica Neue', Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
    }
    .container {
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        max-width: 1400px;
    }
    h1 {
        color: #232f3e;
        text-align: center;
        margin-bottom: 10px;
    }
    .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 30px;
    }
</style>
</head>
<body>
<div class="container">
<h1>Budget App - AWS Serverless Architecture</h1>
<p class="subtitle">Multi-Tenant 3-Tier Application with Terraform Remote State</p>

<svg width="1340" height="900" viewBox="0 0 1340 900" xmlns="http://www.w3.org/2000/svg">
    <!-- Background -->
    <rect width="1340" height="900" fill="#ffffff"/>
    
    <!-- Title -->
    <text x="670" y="30" font-size="24" font-weight="bold" fill="#232f3e" text-anchor="middle">
        AWS Infrastructure Diagram
    </text>
    
    <!-- AWS Cloud Border -->
    <rect x="50" y="60" width="1240" height="780" rx="10" fill="none" stroke="#FF9900" stroke-width="3" stroke-dasharray="10,5"/>
    <text x="70" y="85" font-size="16" font-weight="bold" fill="#FF9900">AWS Cloud</text>
    
    <!-- Region Box -->
    <rect x="80" y="100" width="1180" height="720" rx="8" fill="#f0f8ff" stroke="#4a90e2" stroke-width="2"/>
    <text x="100" y="125" font-size="14" font-weight="bold" fill="#4a90e2">Region: af-south-1</text>
    
    <!-- Terraform State Section (Top) -->
    <rect x="100" y="140" width="280" height="120" rx="6" fill="#fff" stroke="#7b42bc" stroke-width="2"/>
    <text x="240" y="165" font-size="14" font-weight="bold" fill="#7b42bc" text-anchor="middle">Terraform State</text>
    
    <!-- S3 State Bucket -->
    <rect x="120" y="180" width="60" height="60" rx="4" fill="#569A31"/>
    <text x="150" y="210" font-size="24" fill="#fff" text-anchor="middle">S3</text>
    <text x="150" y="230" font-size="10" fill="#fff" text-anchor="middle">State</text>
    <text x="240" y="200" font-size="11" fill="#333" text-anchor="middle">terraform-state-bucket</text>
    <text x="240" y="215" font-size="10" fill="#666" text-anchor="middle">terraform.tfstate</text>
    <text x="240" y="230" font-size="10" fill="#666" text-anchor="middle">Encrypted + Versioned</text>
    
    <!-- Tier 1: Presentation Layer -->
    <rect x="100" y="280" width="1140" height="140" rx="6" fill="#fff9e6" stroke="#FF9900" stroke-width="2"/>
    <text x="120" y="305" font-size="16" font-weight="bold" fill="#FF9900">Tier 1: Presentation Layer</text>
    
    <!-- User Icon -->
    <circle cx="180" cy="360" r="30" fill="#4a90e2" stroke="#2c5aa0" stroke-width="2"/>
    <text x="180" y="370" font-size="28" fill="#fff" text-anchor="middle">ðŸ‘¤</text>
    <text x="180" y="410" font-size="12" fill="#333" text-anchor="middle">End Users</text>
    
    <!-- Arrow User to S3 -->
    <path d="M 210 360 L 340 360" stroke="#4a90e2" stroke-width="3" fill="none" marker-end="url(#arrowblue)"/>
    <text x="275" y="350" font-size="11" fill="#4a90e2">HTTPS</text>
    
    <!-- S3 Website Bucket -->
    <rect x="350" y="330" width="70" height="70" rx="6" fill="#569A31"/>
    <text x="385" y="360" font-size="28" fill="#fff" text-anchor="middle">S3</text>
    <text x="385" y="380" font-size="10" fill="#fff" text-anchor="middle">Website</text>
    <text x="500" y="355" font-size="12" fill="#333">Static Website Hosting</text>
    <text x="500" y="370" font-size="10" fill="#666">â€¢ login.html</text>
    <text x="500" y="385" font-size="10" fill="#666">â€¢ register.html</text>
    <text x="500" y="400" font-size="10" fill="#666">â€¢ budgetmain.html</text>
    
    <!-- CloudWatch Logs (Side) -->
    <rect x="1150" y="330" width="70" height="70" rx="6" fill="#e25444"/>
    <text x="1185" y="360" font-size="10" fill="#fff" text-anchor="middle">Cloud</text>
    <text x="1185" y="375" font-size="10" fill="#fff" text-anchor="middle">Watch</text>
    <text x="1185" y="390" font-size="10" fill="#fff" text-anchor="middle">Logs</text>
    
    <!-- Tier 2: Application Layer -->
    <rect x="100" y="440" width="1140" height="160" rx="6" fill="#ffe6f0" stroke="#FF4F8B" stroke-width="2"/>
    <text x="120" y="465" font-size="16" font-weight="bold" fill="#FF4F8B">Tier 2: Application Layer</text>
    
    <!-- Arrow S3 to API Gateway -->
    <path d="M 385 400 L 385 490" stroke="#4a90e2" stroke-width="3" fill="none" marker-end="url(#arrowblue)"/>
    <text x="395" y="445" font-size="11" fill="#4a90e2">API Calls</text>
    
    <!-- API Gateway -->
    <rect x="350" y="490" width="70" height="70" rx="6" fill="#FF4F8B"/>
    <text x="385" y="515" font-size="10" fill="#fff" text-anchor="middle">API</text>
    <text x="385" y="530" font-size="10" fill="#fff" text-anchor="middle">Gateway</text>
    <text x="385" y="545" font-size="9" fill="#fff" text-anchor="middle">REST API</text>
    <text x="500" y="510" font-size="11" fill="#333">Endpoints:</text>
    <text x="500" y="525" font-size="10" fill="#666">POST /register</text>
    <text x="500" y="540" font-size="10" fill="#666">POST /login</text>
    <text x="500" y="555" font-size="10" fill="#666">POST /budget</text>
    
    <!-- Arrow API Gateway to Lambda -->
    <path d="M 420 525 L 650 525" stroke="#FF9900" stroke-width="3" fill="none" marker-end="url(#arroworange)"/>
    <text x="535" y="515" font-size="11" fill="#FF9900">Invoke</text>
    
    <!-- Lambda Function -->
    <rect x="660" y="490" width="70" height="70" rx="6" fill="#FF9900"/>
    <text x="695" y="515" font-size="10" fill="#000" text-anchor="middle">Lambda</text>
    <text x="695" y="530" font-size="9" fill="#000" text-anchor="middle">BudgetAPI</text>
    <text x="695" y="545" font-size="8" fill="#000" text-anchor="middle">Node.js 20</text>
    <text x="810" y="510" font-size="11" fill="#333">Function:</text>
    <text x="810" y="525" font-size="10" fill="#666">â€¢ Authentication</text>
    <text x="810" y="540" font-size="10" fill="#666">â€¢ Business Logic</text>
    <text x="810" y="555" font-size="10" fill="#666">â€¢ Data Processing</text>
    
    <!-- IAM Role -->
    <rect x="970" y="490" width="70" height="70" rx="6" fill="#DD344C"/>
    <text x="1005" y="515" font-size="10" fill="#fff" text-anchor="middle">IAM</text>
    <text x="1005" y="530" font-size="9" fill="#fff" text-anchor="middle">Role</text>
    <text x="1005" y="545" font-size="8" fill="#fff" text-anchor="middle">Permissions</text>
    
    <!-- Arrow Lambda to IAM -->
    <path d="M 730 525 L 960 525" stroke="#999" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
    <text x="845" y="515" font-size="10" fill="#666">uses</text>
    
    <!-- Arrow Lambda to CloudWatch -->
    <path d="M 730 510 L 1150 370" stroke="#e25444" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
    
    <!-- Tier 3: Data Layer -->
    <rect x="100" y="620" width="1140" height="180" rx="6" fill="#e6f3ff" stroke="#4053D6" stroke-width="2"/>
    <text x="120" y="645" font-size="16" font-weight="bold" fill="#4053D6">Tier 3: Data Layer</text>
    
    <!-- Arrow Lambda to DynamoDB -->
    <path d="M 695 560 L 500 670" stroke="#4053D6" stroke-width="3" fill="none" marker-end="url(#arrowpurple)"/>
    <text x="580" y="610" font-size="11" fill="#4053D6">Read/Write</text>
    
    <path d="M 695 560 L 850 670" stroke="#4053D6" stroke-width="3" fill="none" marker-end="url(#arrowpurple)"/>
    <text x="780" y="610" font-size="11" fill="#4053D6">Read/Write</text>
    
    <!-- DynamoDB Users Table -->
    <rect x="350" y="670" width="70" height="70" rx="6" fill="#4053D6"/>
    <text x="385" y="695" font-size="10" fill="#fff" text-anchor="middle">Dynamo</text>
    <text x="385" y="710" font-size="10" fill="#fff" text-anchor="middle">DB</text>
    <text x="385" y="725" font-size="9" fill="#fff" text-anchor="middle">Users</text>
    <text x="500" y="690" font-size="11" fill="#333">Users Table</text>
    <text x="500" y="705" font-size="10" fill="#666">PK: username</text>
    <text x="500" y="720" font-size="10" fill="#666">â€¢ password (hashed)</text>
    <text x="500" y="735" font-size="10" fill="#666">â€¢ createdAt</text>
    
    <!-- DynamoDB Budget Table -->
    <rect x="820" y="670" width="70" height="70" rx="6" fill="#4053D6"/>
    <text x="855" y="695" font-size="10" fill="#fff" text-anchor="middle">Dynamo</text>
    <text x="855" y="710" font-size="10" fill="#fff" text-anchor="middle">DB</text>
    <text x="855" y="725" font-size="9" fill="#fff" text-anchor="middle">Budget</text>
    <text x="970" y="690" font-size="11" fill="#333">BudgetData Table</text>
    <text x="970" y="705" font-size="10" fill="#666">PK: userId</text>
    <text x="970" y="720" font-size="10" fill="#666">SK: yearMonth</text>
    <text x="970" y="735" font-size="10" fill="#666">â€¢ income[] â€¢ expenses[]</text>
    
    <!-- Legend -->
    <rect x="100" y="820" width="300" height="60" rx="4" fill="#f9f9f9" stroke="#ccc" stroke-width="1"/>
    <text x="250" y="840" font-size="13" font-weight="bold" fill="#232f3e" text-anchor="middle">Legend</text>
    <line x1="120" y1="850" x2="150" y2="850" stroke="#4a90e2" stroke-width="3" marker-end="url(#arrowblue)"/>
    <text x="160" y="855" font-size="11" fill="#333">Data Flow</text>
    <line x1="240" y1="850" x2="270" y2="850" stroke="#999" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="280" y="855" font-size="11" fill="#333">Reference</text>
    
    <!-- Key Features Box -->
    <rect x="450" y="820" width="380" height="60" rx="4" fill="#f0f8ff" stroke="#4a90e2" stroke-width="1"/>
    <text x="640" y="840" font-size="13" font-weight="bold" fill="#232f3e" text-anchor="middle">Key Features</text>
    <text x="460" y="855" font-size="10" fill="#333">âœ“ Serverless & Auto-scaling</text>
    <text x="460" y="870" font-size="10" fill="#333">âœ“ Multi-tenant Architecture</text>
    <text x="640" y="855" font-size="10" fill="#333">âœ“ Pay-per-use Pricing</text>
    <text x="640" y="870" font-size="10" fill="#333">âœ“ Infrastructure as Code</text>
    
    <!-- Terraform Info Box -->
    <rect x="880" y="820" width="360" height="60" rx="4" fill="#f5f0ff" stroke="#7b42bc" stroke-width="1"/>
    <text x="1060" y="840" font-size="13" font-weight="bold" fill="#7b42bc" text-anchor="middle">Terraform Managed</text>
    <text x="890" y="855" font-size="10" fill="#333">State: S3 Backend (Encrypted)</text>
    <text x="890" y="870" font-size="10" fill="#333">Resources: 15+ AWS Services</text>
    
    <!-- Arrow Markers -->
    <defs>
        <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#4a90e2"/>
        </marker>
        <marker id="arroworange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#FF9900"/>
        </marker>
        <marker id="arrowpurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#4053D6"/>
        </marker>
    </defs>
</svg>

<div style="margin-top: 30px; padding: 20px; background: #f9f9f9; border-radius: 6px;">
    <h3 style="color: #232f3e; margin-top: 0;">Terraform Remote State Configuration</h3>
    <pre style="background: #232f3e; color: #fff; padding: 15px; border-radius: 4px; overflow-x: auto;"><code>terraform {
  backend "s3" {
    bucket       = "evamerica0442-terraform-state-bucket-001"
    key          = "budgetapp/terraform.tfstate"
    region       = "us-east-1"
    encrypt      = true
    use_lockfile = true
  }
}</code></pre>
    
    <h4 style="color: #232f3e;">Benefits of Remote State:</h4>
    <ul style="color: #333;">
        <li><strong>Team Collaboration:</strong> Multiple team members can work on the same infrastructure</li>
        <li><strong>State Locking:</strong> Prevents concurrent modifications and state corruption</li>
        <li><strong>Encryption:</strong> State file is encrypted at rest in S3</li>
        <li><strong>Versioning:</strong> S3 versioning enables state recovery</li>
        <li><strong>Backup:</strong> Automatic backups of infrastructure state</li>
    </ul>
    
    <h4 style="color: #232f3e;">Deployed Resources:</h4>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; color: #333;">
        <div>â€¢ 2 DynamoDB Tables</div>
        <div>â€¢ 1 Lambda Function</div>
        <div>â€¢ 1 API Gateway REST API</div>
        <div>â€¢ 1 S3 Bucket (Website)</div>
        <div>â€¢ 1 IAM Role + Policies</div>
        <div>â€¢ CloudWatch Log Groups</div>
        <div>â€¢ 4 API Gateway Resources</div>
        <div>â€¢ 4 API Gateway Methods</div>
    </div>
</div>

</div>
</body>
</html>
